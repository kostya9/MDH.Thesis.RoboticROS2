reactiveclass Subscriber(2) {
	knownrebecs {
		Publisher p;
	}
	Subscriber() {
		subscribe();
	}
	
	void subscribe() {
		p.subscribe();
	}

	msgsrv onNewMessage(int message) { }
}

reactiveclass Publisher(2) {
	msgsrv subscribe() {
		self.infiniteSend((Subscriber) sender);
	}
	
	msgsrv infiniteSend(Subscriber s) {
		s.onNewMessage(1);
		infiniteSend(s) after(5);
	}
}

main {
	Publisher p():();
	Subscriber s(p):();
}